# Clairo 서비스 워크플로우

---

## 1. 사용자 온보딩 워크플로우

```
[회원가입]
    │
    ▼
[프로필 설정]
    │  - 프리랜서 유형 선택 (개발, 디자인, 영상, 번역 등)
    │  - 사업자 유무 선택 (개인/개인사업자)
    │  - 과세 유형 설정 (간이과세자/일반과세자)
    ▼
[AI 초기 세금 브리핑]
    │  Claude가 유형에 맞는 세금 안내 자동 생성
    │  "디자이너 프리랜서의 경우, 3.3% 원천징수 +
    │   연간 수익 2,400만원 초과 시 종합소득세 신고 필요합니다."
    ▼
[대시보드 진입]
```

---

## 2. 수입 등록 워크플로우

```
[수입 발생]
    │
    ├─────────────────────────────────────┐
    │                                     │
    ▼                                     ▼
[인보이스 발행]                    [수동 수입 입력]
    │  - 클라이언트 정보 입력              │  - 날짜, 금액, 출처 입력
    │  - 프로젝트명/서비스 내용            │
    │  - AI가 전문 인보이스 초안 생성      │
    │                                     │
    └──────────────┬──────────────────────┘
                   │
                   ▼
           [수입 DB 저장]
                   │
                   ▼
       [AI 세금 영향 즉시 분석]
           │  "이번 수입으로 올해 누적 수익이
           │   2,100만원입니다. 간이과세자 기준
           │   2,400만원까지 300만원 여유 있습니다."
           ▼
       [대시보드 수익 현황 업데이트]
```

---

## 3. 지출·영수증 처리 워크플로우

```
[지출 발생]
    │
    ├────────────────────────────────────────┐
    │                                        │
    ▼                                        ▼
[영수증 사진 촬영/업로드]            [수동 지출 입력]
    │                                        │
    ▼                                        │
[Claude Haiku - OCR 처리]                   │
    │  - 금액, 날짜, 가맹점명 추출           │
    │  - 업종 자동 분류                      │
    │  예: "스타벅스 → 식비/미팅비"         │
    │      "Adobe → 소프트웨어/업무용"       │
    │                                        │
    └──────────────┬─────────────────────────┘
                   │
                   ▼
        [공제 가능 여부 AI 판단]
           │  Claude가 해당 지출이 필요경비로
           │  인정될 수 있는지 분석
           │  "업무용 소프트웨어 구독료는
           │   필요경비로 100% 공제 가능합니다."
           ▼
        [지출 DB 저장]
           │
           ▼
        [월별 지출 현황 업데이트]
```

---

## 4. 계약서 분석 워크플로우

```
[계약서 업로드]  ← PDF, DOCX, 이미지 지원
    │
    ▼
[파일 텍스트 추출]
    │  - PDF: pdf-parse 라이브러리
    │  - DOCX: mammoth 라이브러리
    │  - 이미지: Claude Vision OCR
    │
    ▼
[Claude claude-sonnet-4-6 계약 분석]
    │
    ├──[기본 정보 추출]
    │      - 계약 당사자 (클라이언트명, 연락처)
    │      - 계약 기간 (시작일, 종료일)
    │      - 계약 금액 및 지급 조건
    │      - 프로젝트 범위 및 결과물
    │
    ├──[리스크 분석]
    │      - 지식재산권 귀속 조항 확인
    │      - 비밀유지(NDA) 조건 분석
    │      - 계약 해지 조건 및 위약금 검토
    │      - 불공정 조항 감지
    │      - 분쟁 해결 방법 확인
    │
    ├──[알림 일정 설정]
    │      - 계약 만료 30일/7일 전 알림
    │      - 대금 지급일 알림
    │      - 결과물 납기일 알림
    │
    └──[AI 요약 리포트 생성]
           "이 계약의 핵심 내용:
            - 3개월 웹앱 개발, 총 1,500만원
            - 지적재산권: 납품 후 클라이언트 귀속
            - 주의사항: 계약 해지 시 위약금 없음"
    │
    ▼
[계약 DB 저장 + 알림 스케줄 등록]
    │
    ▼
[계약 대시보드 반영]
```

---

## 5. 세금 신고 준비 워크플로우

```
[신고 기간 도래 / 사용자 요청]
    │
    ▼
[신고 유형 선택]
    │  ├─ 종합소득세 (연 1회, 5월)
    │  ├─ 부가가치세 (연 2회, 1월/7월)
    │  └─ 중간예납 (11월)
    │
    ▼
[해당 기간 데이터 자동 집계]
    │  - 수입 합계 (유형별 분류)
    │  - 지출 합계 (공제 가능 항목)
    │  - 원천징수 세액 합계
    │  - 4대보험 납부 내역
    │
    ▼
[Claude claude-sonnet-4-6 세금 분석]
    │
    ├──[세금 계산]
    │      - 과세표준 산출
    │      - 적용 세율 계산 (누진세)
    │      - 예상 납부세액 계산
    │
    ├──[절세 항목 추천]
    │      - 미처리 공제 항목 발견
    │        "노란우산공제 가입 시 최대 500만원
    │         소득공제 가능합니다."
    │      - 추가 필요경비 인정 가능 항목
    │      - 세액공제 항목 확인
    │
    └──[신고서 초안 생성]
           - 수입·지출 내역 정리
           - 공제 항목 정리
           - 국세청 홈택스 입력 가이드
    │
    ▼
[사용자 검토 및 수정]
    │
    ▼
[최종 신고 완료 기록]
```

---

## 6. 수익 분석 워크플로우

```
[월별 마감 / 분기 마감]
    │
    ▼
[데이터 집계]
    │  - 총 수입 / 총 지출 / 순수익
    │  - 클라이언트별 수익 비중
    │  - 프로젝트 유형별 수익성
    │  - 시간당 단가 계산 (입력한 경우)
    │
    ▼
[Claude claude-sonnet-4-6 인사이트 분석]
    │
    ├──[수익 트렌드 분석]
    │      "전월 대비 수익 23% 증가.
    │       주요 원인: 장기 계약 프로젝트 추가"
    │
    ├──[수익성 분석]
    │      "클라이언트 A는 전체 수익의 60% 차지.
    │       의존도가 높아 리스크 관리 필요합니다."
    │
    ├──[지출 최적화 제안]
    │      "소프트웨어 구독료가 지난 3개월간
    │       20% 증가했습니다. 중복 구독 확인 권장."
    │
    └──[다음 달 수익 예측]
           "현재 계약 기준 다음 달 예상 수입:
            약 350~420만원"
    │
    ▼
[월간 리포트 생성 + 이메일 발송]
```

---

## 7. AI 어드바이저 채팅 워크플로우

```
[사용자 질문 입력]
    │  예: "3.3% 원천징수랑 종합소득세 신고
    │        동시에 해야 하나요?"
    │
    ▼
[사용자 데이터 컨텍스트 로드]
    │  - 현재 연간 수입
    │  - 사업자 유형
    │  - 과세 유형
    │  - 최근 3개월 수익 현황
    │
    ▼
[Claude claude-sonnet-4-6 맞춤 답변 생성]
    │  - 사용자 상황에 맞춘 개인화 답변
    │  - 일반 정보가 아닌 실제 데이터 기반
    │
    ▼
[답변 출력 + 관련 기능 바로가기 제안]
    │  "종합소득세 신고 준비하기 →" 버튼 제공
    │
    ▼
[대화 내역 저장 (학습 맥락 유지)]
```

---

## 8. 알림 자동화 워크플로우

```
[스케줄러 실행] ← 매일 오전 9시
    │
    ├──[계약 만료 확인]
    │      D-30, D-7, D-1 알림 발송
    │
    ├──[세금 신고 기간 확인]
    │      종합소득세: 5월 1일~31일
    │      부가세: 1월/7월 신고 기간
    │
    ├──[대금 수령 확인]
    │      계약서에 명시된 지급일 도래 시 알림
    │
    └──[월간 리포트 발송]
           매월 1일 전월 수익 리포트 이메일
    │
    ▼
[알림 채널: 앱 푸시 + 이메일]
```

---

## API 엔드포인트 구조

```
POST /api/receipts/analyze          # 영수증 OCR 분석
POST /api/contracts/analyze         # 계약서 AI 분석
GET  /api/tax/calculate             # 세금 계산
POST /api/tax/report/generate       # 신고서 초안 생성
GET  /api/analytics/monthly         # 월별 수익 분석
POST /api/ai/chat                   # AI 어드바이저 채팅
POST /api/invoices/generate         # 인보이스 생성
GET  /api/alerts/check              # 알림 확인 (스케줄러)
```
